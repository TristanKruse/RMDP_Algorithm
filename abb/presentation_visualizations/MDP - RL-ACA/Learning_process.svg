<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   viewBox="0 0 1000 800"
   version="1.1"
   id="svg42"
   sodipodi:docname="Learning_process.svg"
   inkscape:version="1.4 (86a8ad7, 2024-10-11)"
   inkscape:export-filename="Learning_process.png"
   inkscape:export-xdpi="300"
   inkscape:export-ydpi="300"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs42" />
  <sodipodi:namedview
     id="namedview42"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="1.0721507"
     inkscape:cx="333.90828"
     inkscape:cy="325.98029"
     inkscape:window-width="2400"
     inkscape:window-height="1494"
     inkscape:window-x="-11"
     inkscape:window-y="-11"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg42" />
  <!-- Background -->
  <rect
     width="1000"
     height="800"
     fill="#f9f9f9"
     id="rect1" />
  <!-- Title -->
  <text
     x="500"
     y="40"
     font-family="Arial"
     font-size="24"
     font-weight="bold"
     text-anchor="middle"
     id="text1">Reinforcement Learning Process for Order Postponement</text>
  <!-- Main Loop (Episodes) -->
  <rect
     x="100"
     y="80"
     width="800"
     height="650"
     rx="10"
     ry="10"
     fill="none"
     stroke="#333"
     stroke-width="2"
     stroke-dasharray="5,5"
     id="rect2" />
  <text
     x="500"
     y="70"
     font-family="Arial"
     font-size="18"
     font-weight="bold"
     text-anchor="middle"
     id="text2">Phased Curriculum Learning</text>
  <!-- Phase Loop -->
  <rect
     x="150"
     y="110"
     width="700"
     height="600"
     rx="10"
     ry="10"
     fill="none"
     stroke="#555"
     stroke-width="2"
     stroke-dasharray="5,5"
     id="rect3" />
  <text
     x="500"
     y="105"
     font-family="Arial"
     font-size="16"
     font-weight="bold"
     text-anchor="middle"
     id="text3">Phases Loop</text>
  <!-- Episode Loop -->
  <rect
     x="200"
     y="140"
     width="600"
     height="550"
     rx="10"
     ry="10"
     fill="none"
     stroke="#777"
     stroke-width="2"
     stroke-dasharray="5,5"
     id="rect4" />
  <text
     x="500"
     y="135"
     font-family="Arial"
     font-size="14"
     font-weight="bold"
     text-anchor="middle"
     id="text4">Episodes Loop (Decay Exploration Rate)</text>
  <!-- Simulation Steps Loop -->
  <rect
     x="250"
     y="170"
     width="500"
     height="500"
     rx="10"
     ry="10"
     fill="none"
     stroke="#999"
     stroke-width="2"
     id="rect5" />
  <text
     x="500"
     y="165"
     font-family="Arial"
     font-size="12"
     font-weight="bold"
     text-anchor="middle"
     id="text5">Simulation Steps Loop</text>
  <!-- Environment -->
  <rect
     x="300"
     y="200"
     width="400"
     height="80"
     rx="5"
     ry="5"
     fill="#e6f2ff"
     stroke="#3366cc"
     stroke-width="2"
     id="rect6" />
  <text
     x="498.68097"
     y="224.55482"
     font-family="Arial"
     font-size="14px"
     font-weight="bold"
     text-anchor="middle"
     id="text6">Environment</text>
  <text
     x="500"
     y="250.49052"
     font-family="Arial"
     font-size="12px"
     text-anchor="middle"
     id="text7">Orders, vehicles, routes, delays</text>
  <!-- Agent Decision -->
  <rect
     x="300"
     y="320"
     width="400"
     height="100"
     rx="5"
     ry="5"
     fill="#e6ffe6"
     stroke="#339933"
     stroke-width="2"
     id="rect7" />
  <text
     x="500"
     y="350"
     font-family="Arial"
     font-size="14"
     font-weight="bold"
     text-anchor="middle"
     id="text8">Agent Decision Making (ACA Policy)</text>
  <text
     x="500"
     y="370"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text9">For each order: POSTPONE or ASSIGN?</text>
  <text
     x="500"
     y="390"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text10">Exploration rate controls random vs. learned decisions</text>
  <!-- Reward Calculation -->
  <rect
     x="300"
     y="460"
     width="400"
     height="100"
     rx="5"
     ry="5"
     fill="#ffe6e6"
     stroke="#cc3333"
     stroke-width="2"
     id="rect10" />
  <text
     x="500"
     y="490"
     font-family="Arial"
     font-size="14"
     font-weight="bold"
     text-anchor="middle"
     id="text11">Reward Calculation</text>
  <text
     x="500"
     y="510"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text12">Compare previous vs. current estimated delays</text>
  <text
     x="500"
     y="530"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text13">Reward = -1 * (current_delay - previous_delay)</text>
  <!-- Experience Buffer and Learning -->
  <rect
     x="300"
     y="600"
     width="400"
     height="150"
     rx="5"
     ry="5"
     fill="#fff2e6"
     stroke="#cc8033"
     stroke-width="2"
     id="rect13" />
  <text
     x="500"
     y="630"
     font-family="Arial"
     font-size="14"
     font-weight="bold"
     text-anchor="middle"
     id="text14">Experience Collection and Learning</text>
  <text
     x="500"
     y="650"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text15">Add (state, action, reward, next_state) to replay buffer</text>
  <text
     x="500"
     y="670"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text16">When buffer size &gt;= batch_size: Sample batch and update network</text>
  <text
     x="500"
     y="690"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text17">Q(s,a) = r + Î³ * max_a' Q(s',a')</text>
  <text
     x="500"
     y="710"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text18">Backpropagate loss and update network weights</text>
  <!-- Arrows -->
  <!-- Environment to Agent -->
  <polygon
     points="500,280 500,320 510,310 500,320 490,310"
     fill="#000"
     id="polygon18" />
  <line
     x1="500"
     y1="280"
     x2="500"
     y2="320"
     stroke="#000"
     stroke-width="2"
     id="line18" />
  <text
     x="520"
     y="305"
     font-family="Arial"
     font-size="12"
     fill="#000"
     id="text19">state (order features)</text>
  <!-- Agent to Environment -->
  <polygon
     points="500,420 500,460 510,450 500,460 490,450"
     fill="#000"
     id="polygon19" />
  <line
     x1="500"
     y1="420"
     x2="500"
     y2="460"
     stroke="#000"
     stroke-width="2"
     id="line19" />
  <text
     x="520"
     y="445"
     font-family="Arial"
     font-size="12"
     fill="#000"
     id="text20">action (postpone/assign)</text>
  <!-- Environment to Reward -->
  <polygon
     points="500,560 500,600 510,590 500,600 490,590"
     fill="#000"
     id="polygon20" />
  <line
     x1="500"
     y1="560"
     x2="500"
     y2="600"
     stroke="#000"
     stroke-width="2"
     id="line20" />
  <text
     x="520"
     y="585"
     font-family="Arial"
     font-size="12"
     fill="#000"
     id="text21">rewards, next states</text>
  <!-- Learning to Agent (update) -->
  <path
     d="M300,670 L250,670 L250,370 L300,370"
     fill="none"
     stroke="#000"
     stroke-width="2"
     stroke-dasharray="5,5"
     id="path21" />
  <polygon
     points="300,370 290,360 290,380"
     fill="#000"
     id="polygon21" />
  <text
     x="220"
     y="520"
     font-family="Arial"
     font-size="12"
     fill="#000"
     transform="rotate(-90 220,520)"
     id="text22">Update policy network</text>
  <!-- Episode Loop Info -->
  <rect
     x="758.961"
     y="191.12726"
     width="180"
     height="80"
     rx="5"
     ry="5"
     fill="#f0f0f0"
     stroke="#999999"
     stroke-width="1"
     id="rect22" />
  <text
     x="848.961"
     y="207.86279"
     font-family="Arial"
     font-size="12px"
     font-weight="bold"
     text-anchor="middle"
     id="text23">After Each Episode</text>
  <text
     x="845.66339"
     y="227.82965"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text24"><tspan
       sodipodi:role="line"
       id="tspan42"
       x="845.66339"
       y="227.82965">- Decay exploration rate</tspan><tspan
       sodipodi:role="line"
       id="tspan43"
       x="845.66339"
       y="240.32965">- Save model checkpoint</tspan><tspan
       sodipodi:role="line"
       x="845.66339"
       y="252.82965"
       id="tspan44">- Evaluate performance</tspan></text>
  <text
     x="890"
     y="440"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text25" />
  <text
     x="890"
     y="460"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text26" />
  <!-- Phase Loop Info -->
  <rect
     x="762.22552"
     y="320.57269"
     width="180"
     height="80"
     rx="5"
     ry="5"
     fill="#f0f0f0"
     stroke="#999999"
     stroke-width="1"
     id="rect26" />
  <text
     x="852.22552"
     y="340.57269"
     font-family="Arial"
     font-size="12px"
     font-weight="bold"
     text-anchor="middle"
     id="text27">After Each Phase</text>
  <text
     x="852.22552"
     y="360.57269"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text28"><tspan
       sodipodi:role="line"
       id="tspan45"
       x="852.22552"
       y="360.57269">- Increase environment complexity</tspan><tspan
       sodipodi:role="line"
       id="tspan46"
       x="852.22552"
       y="373.07269">- Check stability criteria</tspan><tspan
       sodipodi:role="line"
       x="852.22552"
       y="385.57269"
       id="tspan47">- Plot learning progress</tspan></text>
  <text
     x="890"
     y="340"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text29" />
  <text
     x="890"
     y="360"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text30" />
  <!-- State Representation -->
  <rect
     x="50"
     y="380"
     width="180"
     height="180"
     rx="5"
     ry="5"
     fill="#e6f9ff"
     stroke="#33cccc"
     stroke-width="1"
     id="rect30" />
  <text
     x="140"
     y="400"
     font-family="Arial"
     font-size="12"
     font-weight="bold"
     text-anchor="middle"
     id="text31">Order State Features</text>
  <text
     x="140"
     y="425"
     font-family="Arial"
     font-size="10"
     text-anchor="middle"
     id="text32">1. Time of day (normalized)</text>
  <text
     x="140"
     y="445"
     font-family="Arial"
     font-size="10"
     text-anchor="middle"
     id="text33">2. System utilization</text>
  <text
     x="140"
     y="465"
     font-family="Arial"
     font-size="10"
     text-anchor="middle"
     id="text34">3. Unassigned order ratio</text>
  <text
     x="140"
     y="485"
     font-family="Arial"
     font-size="10"
     text-anchor="middle"
     id="text35">4. Order urgency</text>
  <text
     x="140"
     y="505"
     font-family="Arial"
     font-size="10"
     text-anchor="middle"
     id="text36">5. Bundling potential</text>
  <text
     x="140"
     y="525"
     font-family="Arial"
     font-size="10"
     text-anchor="middle"
     id="text37">6. Restaurant congestion</text>
  <!-- Metrics -->
  <rect
     x="764.51385"
     y="447.31198"
     width="180.08676"
     height="100.03361"
     rx="5.0024099"
     ry="4.168067"
     fill="#f9e6ff"
     stroke="#9933cc"
     stroke-width="0.913244"
     id="rect37" />
  <text
     x="854.55725"
     y="467.35535"
     font-family="Arial"
     font-size="12px"
     font-weight="bold"
     text-anchor="middle"
     id="text38">Key Metrics</text>
  <text
     x="854.55725"
     y="487.35532"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text39"><tspan
       sodipodi:role="line"
       id="tspan48"
       x="854.55725"
       y="487.35532">- Total reward</tspan><tspan
       sodipodi:role="line"
       id="tspan49"
       x="854.55725"
       y="499.85532">- On-time delivery rate</tspan><tspan
       sodipodi:role="line"
       x="854.55725"
       y="512.35535"
       id="tspan50">- Total/max delay</tspan><tspan
       sodipodi:role="line"
       x="854.55725"
       y="524.85535"
       id="tspan51">- Postponement rate</tspan></text>
  <text
     x="890"
     y="540"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text40" />
  <text
     x="890"
     y="560"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text41" />
  <text
     x="890"
     y="580"
     font-family="Arial"
     font-size="10px"
     text-anchor="middle"
     id="text42" />
</svg>
